(window["webpackJsonpreact-tetris"]=window["webpackJsonpreact-tetris"]||[]).push([[0],{14:function(e,t,n){e.exports=n(25)},19:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(7),c=n.n(a),i=(n(19),n(1)),l=function(){return Array.from(Array(20),function(){return new Array(12).fill([0,"clear"])})},u=function(e,t,n){for(var r=n.x,o=n.y,a=0;a<e.tetromino.length;a+=1)for(var c=0;c<e.tetromino[a].length;c+=1)if(0!==e.tetromino[a][c]&&(!t[a+e.pos.y+o]||!t[a+e.pos.y+o][c+e.pos.x+r]||"clear"!==t[a+e.pos.y+o][c+e.pos.x+r][1]))return!0};var d=n(8),f={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["0","0"],["0","0"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,0,0],["T","T","T"],["0","T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},s=function(){var e="IJLOSTZ"[Math.floor(Math.random()*"IJLOSTZ".length)];return f[e]};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m=function(){var e=Object(r.useState)({pos:{x:0,y:0},tetromino:f[0].shape,collided:!1}),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(r.useCallback)(function(){o({pos:{x:4,y:0},tetromino:s().shape,collided:!1})},[]),c=function(e,t){var n=e.map(function(t,n){return e.map(function(e){return e[n]})});return t>0?n.map(function(e){return e.reverse()}):n.reverse()};return[n,function(e){var t=e.x,n=e.y,r=e.collided;o(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{pos:{x:e.pos.x+=t,y:e.pos.y+=n},collided:r})})},a,function(e,t){var r=JSON.parse(JSON.stringify(n));r.tetromino=c(r.tetromino,t);for(var a=r.pos.x,i=1;u(r,e,{x:0,y:0});)if(r.pos.x+=i,(i=-(i+(i>0?1:-1)))>r.tetromino[0].length)return c(r.tetromino,-t),void(r.pos.x=a);o(r)}]},b=function(e,t){var n=Object(r.useState)(l()),o=Object(i.a)(n,2),a=o[0],c=o[1],u=Object(r.useState)(0),d=Object(i.a)(u,2),f=d[0],s=d[1];return Object(r.useEffect)(function(){s(0);var n=function(n){var r=n.map(function(e){return e.map(function(e){return"clear"===e[1]?[0,"clear"]:e})});return e.tetromino.forEach(function(t,n){t.forEach(function(t,o){0!==t&&(r[n+e.pos.y][o+e.pos.x]=[t,"".concat(e.collided?"merged":"clear")])})}),e.collided?(t(),function(e){return e.reduce(function(t,n){return-1===n.findIndex(function(e){return 0===e[0]})?(s(function(e){return e+1}),t.unshift(new Array(e[0].length).fill([0,"clear"])),t):(t.push(n),t)},[])}(r)):r};c(function(e){return n(e)})},[e.collided,e.pos.x,e.pos.y,e.tetromino,t]),[a,c,f]},g=n(2),h=n(9),x=n.n(h),y=g.a.div.withConfig({displayName:"StyledTetris__StyledTetrisWrapper",componentId:"sc-19l1u59-0"})(["width:100vw;height:100vh;background:url(",") #000;background-size:cover;overflow:hidden;"],x.a),v=g.a.div.withConfig({displayName:"StyledTetris",componentId:"sc-19l1u59-1"})(["display:flex;flex-direction:row;align-items:flex-start;padding:40px;margin:0 auto;@media only screen and (max-width:480px){padding:20px;}aside{width:100%;max-width:200px;display:block;padding-left:20px;}"]),w=g.a.div.withConfig({displayName:"StyledTitle",componentId:"sc-17irh8c-0"})(["padding:40px 0 0 40px;h1{color:#fff;font-family:PressStart2P,Arial,Helvetica,sans-serif;}"]),O=g.a.div.withConfig({displayName:"StyledStage",componentId:"sc-1oc01w7-0"})(["display:grid;grid-template-rows:repeat( ",",calc(20vw / ",") );grid-template-columns:repeat(",",1fr);grid-gap:1px;border:2px solid #333;width:100%;max-width:20vw;background:#111;@media only screen and (max-width:1024px){grid-template-rows:repeat( ",",calc(45vw / ",") );max-width:45vw;}@media only screen and (max-width:768px){grid-template-rows:repeat( ",",calc(40vw / ",") );max-width:40vw;}"],function(e){return e.height},function(e){return e.width},function(e){return e.width},function(e){return e.height},function(e){return e.width},function(e){return e.height},function(e){return e.width}),j=g.a.div.withConfig({displayName:"StyledCell",componentId:"sc-1no10q4-0"})(["width:auto;background:rgba(",",0.8);border:",";border-bottom-color:rgba(",",0.1);border-right-color:rgba(",",1);border-top-color:rgba(",",1);border-left-color:rgba(",",0.3);"],function(e){return e.color},function(e){return 0===e.type?"0 solid":"4px solid"},function(e){return e.color},function(e){return e.color},function(e){return e.color},function(e){return e.color}),E=o.a.memo(function(e){var t=e.type;return o.a.createElement(j,{type:t,color:f[t].color})}),S=function(e){var t=e.stage;return o.a.createElement(O,{width:t[0].length,height:t.length},t.map(function(e){return e.map(function(e,t){return o.a.createElement(E,{key:t,type:e[0]})})}))},k=g.a.div.withConfig({displayName:"StyledDisplay",componentId:"isbvgw-0"})(["box-sizing:border-box;display:flex;align-items:center;margin:0 0 10px 0;padding:20px;border:4px solid #333;min-height:30px;width:100%;border-radius:20px;color:",";background:#000;font-family:Pixel,Arial,Helvetica,sans-serif;font-size:0.8rem;"],function(e){return e.gameOver?"red":"#999"}),I=function(e){var t=e.gameOver,n=e.text;return o.a.createElement(k,{gameOver:t},n)},C=g.a.button.withConfig({displayName:"StyledButton",componentId:"sc-17gio79-0"})(["box-sizing:border-box;margin:0 0 20px 0;padding:15px;min-height:30px;width:100%;border-radius:15px;border:none;text-align:center;color:#fff;background:#7b1fa2;box-shadow:0 5px #666;font-size:1rem;font-family:Pixel,Arial,Helvetica,sans-serif;outline:none;cursor:pointer;&:hover{background-color:#6a1b9a;}&:active{box-shadow:0 3px #333;transform:translateY(4px);}"]),P=function(e){var t=e.callback;return o.a.createElement(C,{onClick:t},"Start Game")},T=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),d=Object(i.a)(c,2),f=d[0],s=d[1],p=m(),g=Object(i.a)(p,4),h=g[0],x=g[1],O=g[2],j=g[3],E=b(h,O),k=Object(i.a)(E,3),C=k[0],T=k[1],J=function(e){var t=Object(r.useState)(0),n=Object(i.a)(t,2),o=n[0],a=n[1],c=Object(r.useState)(0),l=Object(i.a)(c,2),u=l[0],d=l[1],f=Object(r.useState)(0),s=Object(i.a)(f,2),p=s[0],m=s[1],b=[40,100,300,1200],g=Object(r.useCallback)(function(){e>0&&(a(function(t){return t+b[e-1]*(p+1)}),d(function(t){return t+e}))},[p,b,e]);return Object(r.useEffect)(function(){g()},[g,e,o]),[o,a,u,d,p,m]}(k[2]),N=Object(i.a)(J,6),A=N[0],L=N[1],Z=N[2],D=N[3],z=N[4],R=N[5],G=function(e){u(h,C,{x:e,y:0})||x({x:e,y:0})},H=function(){Z>10*(z+1)&&(R(function(e){return e+1}),a(1e3/(z+1)+200)),u(h,C,{x:0,y:1})?(h.pos.y<1&&(console.log("GAME OVER!!!"),s(!0),a(null)),x({x:0,y:0,collided:!0})):x({x:0,y:1,collided:!1})},M=function(e){var t=e.keyCode;f||(37===t?G(-1):39===t?G(1):40===t?(a(null),H()):38===t&&j(C,1))};return function(e,t){var n=Object(r.useRef)();Object(r.useEffect)(function(){n.current=e},[e]),Object(r.useEffect)(function(){if(null!==t){var e=setInterval(function(){n.current()},t);return function(){clearInterval(e)}}},[t])}(function(){H()},n),o.a.createElement(y,{role:"button",tabIndex:"0",onKeyDown:function(e){return M(e)},onKeyUp:function(e){var t=e.keyCode;f||40===t&&a(1e3/(z+1)+200)}},o.a.createElement(w,null,o.a.createElement("h1",null,"React Tetris")),o.a.createElement(v,null,o.a.createElement(S,{stage:C}),o.a.createElement("aside",null,f?o.a.createElement(I,{gameOver:f,text:"GameOver"}):o.a.createElement("div",null,o.a.createElement(I,{text:"Score: ".concat(A)}),o.a.createElement(I,{text:"Rows: ".concat(Z)}),o.a.createElement(I,{text:"Level: ".concat(z)})),o.a.createElement(P,{callback:function(){T(l()),a(1e3),O(),L(0),R(0),D(0),s(!1)}}))))},J=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(T,null))};c.a.render(o.a.createElement(J,null),document.getElementById("root"))},9:function(e,t,n){e.exports=n.p+"static/media/bg.93e70a2a.jpg"}},[[14,1,2]]]);
//# sourceMappingURL=main.3c4f3c04.chunk.js.map